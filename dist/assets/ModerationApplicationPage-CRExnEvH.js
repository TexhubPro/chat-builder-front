import{g as $,n as T,l as U,r as o,j as e,q as K,B as Y,A as H}from"./index-BZElV6kd.js";import{a as A}from"./errorLocalization-D9V597UG.js";import{b as J,B as D,L as Q,c as W,d as X}from"./usePageSeo-DSlM1PDu.js";import{i as h}from"./chunk-SQIAVXJX-C9suOtsr.js";import{t as G}from"./chunk-WEIB4WXA-30wf2bh3.js";import{d as Z}from"./chunk-IHO36JMK-4dntoivJ.js";import{s as ee,l as ae}from"./chunk-C3QHEOC2-BtGRsASD.js";import"./chunk-KQW2TNLT-CFcSpz4m.js";import"./useLabel-D13VgtCp.js";import"./chunk-ICU6NNET-C8KR39MB.js";import"./chunk-4EXC76WE-YlYzpkM1.js";import"./useListState-DUoLMKFW.js";import"./index-C3hXfed5.js";const te={ru:{title:"Заявка на модерацию",subtitle:"Заполните данные о компании. После отправки заявки вы перейдёте на страницу ожидания.",companyName:"Название компании",industry:"Отрасль",shortDescription:"Краткое описание",primaryGoal:"Основная цель",useCase:"Цель использования Liddo",contactEmail:"Контактный email",contactPhone:"Контактный телефон",submit:"Отправить заявку",required:"Это поле обязательно",invalidEmail:"Введите корректный email",submitFailed:"Не удалось отправить заявку."},en:{title:"Moderation Application",subtitle:"Fill in your company details. After submission you will be redirected to the waiting page.",companyName:"Company name",industry:"Industry",shortDescription:"Short description",primaryGoal:"Primary goal",useCase:"Liddo use case",contactEmail:"Contact email",contactPhone:"Contact phone",submit:"Submit application",required:"This field is required",invalidEmail:"Enter a valid email",submitFailed:"Failed to submit application."}},se=[{key:"lead_generation",label:{ru:"Сбор лидов",en:"Lead generation"}},{key:"support_automation",label:{ru:"Автоматизация поддержки",en:"Support automation"}},{key:"sales_automation",label:{ru:"Автоматизация продаж",en:"Sales automation"}},{key:"appointments",label:{ru:"Записи и бронирования",en:"Appointments and bookings"}},{key:"orders",label:{ru:"Заказы и доставка",en:"Orders and delivery"}},{key:"other",label:{ru:"Другое",en:"Other"}}];function ie(g){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(g)}function be(){const g=$(),{locale:y,messages:l}=T(),{user:m}=U(),i=te[y],[b,L]=o.useState(m?.name?`${m.name} Company`:""),[x,M]=o.useState(""),[v,k]=o.useState(""),[j,B]=o.useState(""),[f,q]=o.useState("lead_generation"),[N,F]=o.useState(m?.email??""),[C,V]=o.useState(m?.phone??""),[S,r]=o.useState(null),[z,E]=o.useState(!1),[a,n]=o.useState({});J({title:`${i.title} | ${l.app.name}`,description:i.subtitle,locale:y});const R=o.useMemo(()=>new Set([f]),[f]),O=async t=>{t.preventDefault(),r(null),n({});const s=b.trim(),c=x.trim(),P=v.trim(),_=j.trim(),d=N.trim(),w=C.trim(),u={};if(s.length<2&&(u.companyName=i.required),d!==""&&!ie(d)&&(u.contactEmail=i.invalidEmail),Object.keys(u).length>0){n(u);return}const I=K();if(!I){r(l.auth.loginFailed);return}E(!0);try{await Y(I,{company_name:s,industry:c!==""?c:void 0,short_description:P!==""?P:void 0,primary_goal:_!==""?_:void 0,liddo_use_case:f,contact_email:d!==""?d:void 0,contact_phone:w!==""?w:void 0}),g("/moderation",{replace:!0})}catch(p){p instanceof H?r(A(p.message,l)):p instanceof Error?r(A(p.message,l)):r(i.submitFailed)}finally{E(!1)}};return e.jsx("main",{className:"min-h-screen bg-[#f5f6f8] px-4 py-6 sm:px-6 sm:py-8",children:e.jsxs("div",{className:"mx-auto w-full max-w-6xl",children:[e.jsxs("header",{className:"mb-6 flex items-start justify-between gap-3",children:[e.jsx("div",{className:"flex items-center gap-3",children:e.jsx("img",{src:D.logoUrl,alt:D.logoAlt,className:"h-10 w-auto object-contain"})}),e.jsx(Q,{})]}),e.jsxs("section",{className:"rounded-2xl border border-default-200 bg-white p-4 sm:p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl font-semibold text-foreground sm:text-3xl",children:i.title}),e.jsx("p",{className:"mt-2 text-sm text-default-600 sm:text-base",children:i.subtitle})]}),e.jsxs("form",{className:"space-y-4 sm:space-y-5",onSubmit:O,noValidate:!0,children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4 lg:grid-cols-2",children:[e.jsx(h,{isRequired:!0,variant:"faded",label:`${i.companyName} *`,labelPlacement:"outside",value:b,onValueChange:t=>{L(t),a.companyName&&n(s=>({...s,companyName:void 0}))},maxLength:160,isInvalid:!!a.companyName,errorMessage:a.companyName}),e.jsx(h,{variant:"faded",label:i.industry,labelPlacement:"outside",value:x,onValueChange:t=>{M(t),a.industry&&n(s=>({...s,industry:void 0}))},maxLength:120,isInvalid:!!a.industry,errorMessage:a.industry})]}),e.jsx(G,{variant:"faded",label:i.shortDescription,labelPlacement:"outside",value:v,onValueChange:t=>{k(t),a.shortDescription&&n(s=>({...s,shortDescription:void 0}))},minRows:5,maxLength:1e3,isInvalid:!!a.shortDescription,errorMessage:a.shortDescription}),e.jsx(G,{variant:"faded",label:i.primaryGoal,labelPlacement:"outside",value:j,onValueChange:t=>{B(t),a.primaryGoal&&n(s=>({...s,primaryGoal:void 0}))},minRows:5,maxLength:1e3,isInvalid:!!a.primaryGoal,errorMessage:a.primaryGoal}),e.jsx(Z,{className:"my-3"}),e.jsx(ee,{isRequired:!0,variant:"faded",label:i.useCase,labelPlacement:"outside",selectedKeys:R,onSelectionChange:t=>{if(t==="all")return;const s=t.values().next().value;typeof s=="string"&&q(s),a.useCase&&n(c=>({...c,useCase:void 0}))},isInvalid:!!a.useCase,errorMessage:a.useCase,children:se.map(t=>e.jsx(ae,{children:t.label[y]},t.key))}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 lg:grid-cols-2",children:[e.jsx(h,{variant:"faded",type:"email",label:i.contactEmail,labelPlacement:"outside",value:N,onValueChange:t=>{F(t),a.contactEmail&&n(s=>({...s,contactEmail:void 0}))},maxLength:255,isInvalid:!!a.contactEmail,errorMessage:a.contactEmail}),e.jsx(h,{variant:"faded",type:"tel",label:i.contactPhone,labelPlacement:"outside",value:C,onValueChange:t=>{V(t),a.contactPhone&&n(s=>({...s,contactPhone:void 0}))},maxLength:32,isInvalid:!!a.contactPhone,errorMessage:a.contactPhone})]}),S&&e.jsx(W,{color:"danger",variant:"flat",title:l.auth.errorTitle,description:S}),e.jsx("div",{className:"flex justify-end",children:e.jsx(X,{type:"submit",color:"primary",isLoading:z,className:"w-full sm:w-auto",children:i.submit})})]})]})]})})}export{be as default};
