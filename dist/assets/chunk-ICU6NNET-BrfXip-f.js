import{z as B,M as x,p as U}from"./usePageSeo-DV5FTLGl.js";import{x as k,r as o,Y as N,b as _,j as h}from"./index-DQLtrWDr.js";var q=k({base:"flex flex-col gap-2 items-start"});const D={badInput:!1,customError:!1,patternMismatch:!1,rangeOverflow:!1,rangeUnderflow:!1,stepMismatch:!1,tooLong:!1,tooShort:!1,typeMismatch:!1,valueMissing:!1,valid:!0},A={...D,customError:!0,valid:!1},y={isInvalid:!1,validationDetails:D,validationErrors:[]},O=o.createContext({}),C="__formValidationState"+Date.now();function ae(t){if(t[C]){let{realtimeValidation:e,displayValidation:a,updateValidation:l,resetValidation:n,commitValidation:i}=t[C];return{realtimeValidation:e,displayValidation:a,updateValidation:l,resetValidation:n,commitValidation:i}}return Q(t)}function Q(t){let{isInvalid:e,validationState:a,name:l,value:n,builtinValidation:i,validate:u,validationBehavior:c="aria"}=t;a&&(e||(e=a==="invalid"));let v=e!==void 0?{isInvalid:e,validationErrors:[],validationDetails:A}:null,s=o.useMemo(()=>{if(!u||n==null)return null;let d=Y(u,n);return R(d)},[u,n]);i?.validationDetails.valid&&(i=void 0);let r=o.useContext(O),f=o.useMemo(()=>l?Array.isArray(l)?l.flatMap(d=>I(r[d])):I(r[l]):[],[r,l]),[m,F]=o.useState(r),[S,b]=o.useState(!1);r!==m&&(F(r),b(!1));let V=o.useMemo(()=>R(S?[]:f),[S,f]),w=o.useRef(y),[E,g]=o.useState(y),$=o.useRef(y),P=()=>{if(!T)return;p(!1);let d=s||i||w.current;M(d,$.current)||($.current=d,g(d))},[T,p]=o.useState(!1);return o.useEffect(P),{realtimeValidation:v||V||s||i||y,displayValidation:c==="native"?v||V||E:v||V||s||i||E,updateValidation(d){c==="aria"&&!M(E,d)?g(d):w.current=d},resetValidation(){let d=y;M(d,$.current)||($.current=d,g(d)),c==="native"&&p(!1),b(!0)},commitValidation(){c==="native"&&p(!0),b(!0)}}}function I(t){return t?Array.isArray(t)?t:[t]:[]}function Y(t,e){if(typeof t=="function"){let a=t(e);if(a&&typeof a!="boolean")return I(a)}return[]}function R(t){return t.length?{isInvalid:!0,validationErrors:t,validationDetails:A}:null}function M(t,e){return t===e?!0:!!t&&!!e&&t.isInvalid===e.isInvalid&&t.validationErrors.length===e.validationErrors.length&&t.validationErrors.every((a,l)=>a===e.validationErrors[l])&&Object.entries(t.validationDetails).every(([a,l])=>e.validationDetails[a]===l)}function ie(t,e,a){let{validationBehavior:l,focus:n}=t;B(()=>{if(l==="native"&&a?.current&&!a.current.disabled){let s=e.realtimeValidation.isInvalid?e.realtimeValidation.validationErrors.join(" ")||"Invalid value.":"";a.current.setCustomValidity(s),a.current.hasAttribute("title")||(a.current.title=""),e.realtimeValidation.isInvalid||e.updateValidation(K(a.current))}});let i=o.useRef(!1),u=x(()=>{i.current||e.resetValidation()}),c=x(s=>{var r;e.displayValidation.isInvalid||e.commitValidation();let f=a==null||(r=a.current)===null||r===void 0?void 0:r.form;if(!s.defaultPrevented&&a&&f&&G(f)===a.current){var m;n?n():(m=a.current)===null||m===void 0||m.focus(),U("keyboard")}s.preventDefault()}),v=x(()=>{e.commitValidation()});o.useEffect(()=>{let s=a?.current;if(!s)return;let r=s.form,f=r?.reset;return r&&(r.reset=()=>{i.current=!window.event||window.event.type==="message"&&window.event.target instanceof MessagePort,f?.call(r),i.current=!1}),s.addEventListener("invalid",c),s.addEventListener("change",v),r?.addEventListener("reset",u),()=>{s.removeEventListener("invalid",c),s.removeEventListener("change",v),r?.removeEventListener("reset",u),r&&(r.reset=f)}},[a,l])}function z(t){let e=t.validity;return{badInput:e.badInput,customError:e.customError,patternMismatch:e.patternMismatch,rangeOverflow:e.rangeOverflow,rangeUnderflow:e.rangeUnderflow,stepMismatch:e.stepMismatch,tooLong:e.tooLong,tooShort:e.tooShort,typeMismatch:e.typeMismatch,valueMissing:e.valueMissing,valid:e.valid}}function K(t){return{isInvalid:!t.validity.valid,validationDetails:z(t),validationErrors:t.validationMessage?[t.validationMessage]:[]}}function G(t){for(let e=0;e<t.elements.length;e++){let a=t.elements[e];if(!a.validity.valid)return a}return null}var L=Symbol("default");function H(t){const e=o.useRef(null),a=o.useRef(void 0),l=o.useCallback(n=>{if(typeof t=="function"){const i=t,u=i(n);return()=>{typeof u=="function"?u():i(null)}}else if(t)return t.current=n,()=>{t.current=null}},[t]);return o.useMemo(()=>({get current(){return e.current},set current(n){e.current=n,a.current&&(a.current(),a.current=void 0),n!=null&&(a.current=l(n))}}),[l])}function J(t,e){let a=o.useContext(t);if(e===null)return null;if(a&&typeof a=="object"&&"slots"in a&&a.slots){let l=new Intl.ListFormat().format(Object.keys(a.slots).map(i=>`"${i}"`));if(!e&&!a.slots[L])throw new Error(`A slot prop is required. Valid slot names are ${l}.`);let n=e||L;if(!a.slots[n])throw new Error(`Invalid slot "${e}". Valid slot names are ${l}.`);return a.slots[n]}return a}function W(t,e,a){let l=J(a,t.slot)||{},{ref:n,...i}=l,u=H(o.useMemo(()=>N(e,n),[e,n])),c=_(i,t);return"style"in i&&i.style&&"style"in t&&t.style&&(typeof i.style=="function"||typeof t.style=="function"?c.style=v=>{let s=typeof i.style=="function"?i.style(v):i.style,r={...v.defaultStyle,...s},f=typeof t.style=="function"?t.style({...v,defaultStyle:r}):t.style;return{...r,...f}}:c.style={...i.style,...t.style}),[c,u]}var j=o.createContext(null);o.forwardRef(function(e,a){[e,a]=W(e,a,j);let{validationErrors:l,validationBehavior:n="native",children:i,className:u,...c}=e;const v=o.useMemo(()=>q({className:u}),[u]);return h.jsx("form",{noValidate:n!=="native",...c,ref:a,className:v,children:h.jsx(j.Provider,{value:{...e,validationBehavior:n},children:h.jsx(O.Provider,{value:l??{},children:i})})})});export{ae as $,j as F,ie as a,C as b,y as c,J as u};
