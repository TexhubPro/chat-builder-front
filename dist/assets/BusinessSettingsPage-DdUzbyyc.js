import{l as W,n as Y,r as h,j as e,s as Q,q as M,A as z}from"./index-DFt9vaGi.js";import{D as H,c as S,b as x,f as X,g as ee}from"./DashboardLayout-Ds61Xg-w.js";import{b as se,c as L,d as ie}from"./usePageSeo-zMtdeAIZ.js";import{c as F}from"./chunk-PMMJMDBI-ntvwE92n.js";import{t as te,a as _}from"./chunk-ML27DD5T-CuQq5MOr.js";import{s as v,l as j}from"./chunk-C3QHEOC2-CruM5zwr.js";import{i as m}from"./chunk-SQIAVXJX-DXL5IOXk.js";import{t as k}from"./chunk-WEIB4WXA-BoKOudBS.js";import{d as ne}from"./index-DaMPhJ29.js";import{s as T}from"./chunk-I3A4XRYQ-Ip9gQi3L.js";import"./useLabel-C9azh59v.js";import"./useToggleState-2DccyJzu.js";import"./chunk-ICU6NNET-Cscege8D.js";import"./useListState-DtQoTo5n.js";import"./chunk-KQW2TNLT-jIFc4Zc4.js";import"./index-BMQI7jkv.js";const V=[15,30,45,60,90,120],O=[0,5,10,15,20,30],q=["monday","tuesday","wednesday","thursday","friday","saturday","sunday"],ae=["Asia/Dushanbe","Asia/Tashkent","Asia/Almaty","Asia/Bishkek","Asia/Samarkand","Asia/Dubai","Asia/Istanbul","Europe/Moscow","Europe/Berlin","Europe/London","America/New_York","America/Chicago","America/Los_Angeles","Asia/Kolkata","Asia/Shanghai","Asia/Tokyo","UTC"],le=[{key:"TJS",label:"TJS"},{key:"USD",label:"USD"},{key:"EUR",label:"EUR"},{key:"RUB",label:"RUB"},{key:"UZS",label:"UZS"},{key:"KZT",label:"KZT"}],re=[{key:"client_name",labelKey:"requiredFieldClientName"},{key:"phone",labelKey:"requiredFieldPhone"},{key:"service_name",labelKey:"requiredFieldService"},{key:"address",labelKey:"requiredFieldAddress"},{key:"amount",labelKey:"requiredFieldAmount"},{key:"note",labelKey:"requiredFieldNote"}],de=[{key:"client_name",labelKey:"requiredFieldClientName"},{key:"phone",labelKey:"requiredFieldPhone"},{key:"service_name",labelKey:"requiredFieldService"},{key:"address",labelKey:"requiredFieldAddress"},{key:"appointment_date",labelKey:"requiredFieldAppointmentDate"},{key:"appointment_time",labelKey:"requiredFieldAppointmentTime"},{key:"appointment_duration_minutes",labelKey:"requiredFieldAppointmentDuration"},{key:"amount",labelKey:"requiredFieldAmount"},{key:"note",labelKey:"requiredFieldNote"}],oe=[{key:"ru",labelKey:"aiLanguageRu"},{key:"en",labelKey:"aiLanguageEn"},{key:"tg",labelKey:"aiLanguageTg"},{key:"uz",labelKey:"aiLanguageUz"},{key:"tr",labelKey:"aiLanguageTr"},{key:"fa",labelKey:"aiLanguageFa"},{key:"kk",labelKey:"aiLanguageKk"},{key:"ar",labelKey:"aiLanguageAr"}];function ue(){return{monday:{is_day_off:!1,start_time:"09:00",end_time:"18:00"},tuesday:{is_day_off:!1,start_time:"09:00",end_time:"18:00"},wednesday:{is_day_off:!1,start_time:"09:00",end_time:"18:00"},thursday:{is_day_off:!1,start_time:"09:00",end_time:"18:00"},friday:{is_day_off:!1,start_time:"09:00",end_time:"18:00"},saturday:{is_day_off:!0,start_time:null,end_time:null},sunday:{is_day_off:!0,start_time:null,end_time:null}}}function ce(l){const c=ue();if(!l)return c;const f={...c};for(const i of q){const y=l[i];if(!y||typeof y!="object"){f[i]=c[i];continue}const g=!!y.is_day_off;f[i]={is_day_off:g,start_time:g?null:y.start_time??c[i].start_time,end_time:g?null:y.end_time??c[i].end_time}}return f}function R(l,c){switch(l){case"monday":return c.businessSettings.mondayLabel;case"tuesday":return c.businessSettings.tuesdayLabel;case"wednesday":return c.businessSettings.wednesdayLabel;case"thursday":return c.businessSettings.thursdayLabel;case"friday":return c.businessSettings.fridayLabel;case"saturday":return c.businessSettings.saturdayLabel;case"sunday":return c.businessSettings.sundayLabel;default:return l}}function me(l){return typeof l=="object"&&l!==null}function p(l){const c=l.trim();return c===""?null:c}function I(l){return{name:l.name??"",shortDescription:l.short_description??"",industry:l.industry??"",primaryGoal:l.primary_goal??"",contactEmail:l.contact_email??"",contactPhone:l.contact_phone??"",website:l.website??"",accountType:l.settings.account_type,businessAddress:l.settings.business.address??"",businessTimezone:l.settings.business.timezone??"UTC",businessCurrency:l.settings.business.currency??"TJS",businessSchedule:ce(l.settings.business.schedule),appointmentSlotMinutes:l.settings.appointment.slot_minutes,appointmentBufferMinutes:l.settings.appointment.buffer_minutes,appointmentMaxDaysAhead:l.settings.appointment.max_days_ahead,appointmentAutoConfirm:l.settings.appointment.auto_confirm,deliveryEnabled:l.settings.delivery.enabled,deliveryRequireAddress:l.settings.delivery.require_delivery_address,deliveryRequireDateTime:l.settings.delivery.require_delivery_datetime,deliveryDefaultEtaMinutes:l.settings.delivery.default_eta_minutes,deliveryFee:String(l.settings.delivery.fee??0),deliveryFreeFromAmount:l.settings.delivery.free_from_amount===null?"":String(l.settings.delivery.free_from_amount),deliveryAvailableFrom:l.settings.delivery.available_from??"09:00",deliveryAvailableTo:l.settings.delivery.available_to??"21:00",deliveryNotes:l.settings.delivery.notes??"",orderRequiredFields:l.settings.crm.order_required_fields??["phone","service_name","address"],appointmentRequiredFields:l.settings.crm.appointment_required_fields??["phone","service_name","address","appointment_date","appointment_time","appointment_duration_minutes"],aiResponseLanguages:l.settings.ai?.response_languages??["ru"]}}function be(l){const f=(me(l.data)?l.data:void 0)?.errors;if(!f)return{};const i=y=>{const g=f[y];if(!Array.isArray(g))return;const N=g[0];return typeof N=="string"?N:void 0};return{name:i("name"),shortDescription:i("short_description"),industry:i("industry"),primaryGoal:i("primary_goal"),contactEmail:i("contact_email"),contactPhone:i("contact_phone"),website:i("website"),businessTimezone:i("settings.business.timezone"),businessCurrency:i("settings.business.currency"),appointmentMaxDaysAhead:i("settings.appointment.max_days_ahead")}}function ke(){const{user:l,logout:c}=W(),{locale:f,messages:i}=Y(),[y,g]=h.useState(!0),[N,A]=h.useState(!1),[C,b]=h.useState(null),[E,D]=h.useState(null),[u,w]=h.useState({}),[n,d]=h.useState(null),[B,P]=h.useState("profile");se({title:`${i.businessSettings.title} | ${i.app.name}`,description:i.businessSettings.subtitle,locale:f}),h.useEffect(()=>{(async()=>{const s=M();if(!s){b(i.businessSettings.unauthorized),g(!1);return}g(!0),b(null);try{const a=await X(s);d(I(a.company))}catch(a){const o=a instanceof z?a.message:i.businessSettings.loadFailed;b(o)}finally{g(!1)}})()},[i.businessSettings.loadFailed,i.businessSettings.unauthorized]);const K=n?.accountType==="with_appointments",U=h.useMemo(()=>{const t=new Set(ae);return n?.businessTimezone&&t.add(n.businessTimezone),Array.from(t).sort((s,a)=>s.localeCompare(a))},[n?.businessTimezone]),G=t=>{for(const s of q){const a=t[s];if(a.is_day_off)continue;const o=a.start_time??"",r=a.end_time??"";if(o===""||r===""||r<=o)return!1}return!0},$=async t=>{if(t.preventDefault(),!n)return;if(b(null),D(null),w({}),n.name.trim().length<2){w(a=>({...a,name:i.businessSettings.nameValidation}));return}if(n.aiResponseLanguages.length===0){b(i.businessSettings.aiLanguageRequiredValidation);return}if(!G(n.businessSchedule)){b(i.businessSettings.invalidScheduleRange);return}if(n.deliveryEnabled&&n.deliveryAvailableTo<=n.deliveryAvailableFrom){b(i.businessSettings.invalidDeliveryRange);return}const s=M();if(!s){b(i.businessSettings.unauthorized);return}A(!0);try{const a=Number(n.deliveryFee);if(!Number.isFinite(a)||a<0){b(i.businessSettings.invalidDeliveryFee),A(!1);return}const o=n.deliveryFreeFromAmount.trim(),r=o===""?null:Number(o);if(o!==""&&(!Number.isFinite(r)||(r??0)<0)){b(i.businessSettings.invalidDeliveryFreeFromAmount),A(!1);return}const Z={name:n.name.trim(),short_description:p(n.shortDescription),industry:p(n.industry),primary_goal:p(n.primaryGoal),contact_email:p(n.contactEmail),contact_phone:p(n.contactPhone),website:p(n.website),settings:{account_type:n.accountType,business:{address:p(n.businessAddress),timezone:n.businessTimezone,currency:n.businessCurrency,schedule:n.businessSchedule},appointment:{enabled:n.accountType==="with_appointments",slot_minutes:n.appointmentSlotMinutes,buffer_minutes:n.appointmentBufferMinutes,max_days_ahead:n.appointmentMaxDaysAhead,auto_confirm:n.appointmentAutoConfirm},delivery:{enabled:n.deliveryEnabled,require_delivery_address:n.deliveryRequireAddress,require_delivery_datetime:n.deliveryRequireDateTime,default_eta_minutes:n.deliveryDefaultEtaMinutes,fee:Number(a.toFixed(2)),free_from_amount:r===null?null:Number(r.toFixed(2)),available_from:n.deliveryAvailableFrom,available_to:n.deliveryAvailableTo,notes:p(n.deliveryNotes)},crm:{order_required_fields:n.orderRequiredFields,appointment_required_fields:n.appointmentRequiredFields},ai:{response_languages:n.aiResponseLanguages}}},J=await ee(s,Z);d(I(J.company)),D(i.businessSettings.saveSuccess)}catch(a){if(a instanceof z){const o=be(a);Object.values(o).some(r=>r)?w(o):b(a.message)}else b(i.businessSettings.saveFailed)}finally{A(!1)}};return e.jsx(H,{title:i.businessSettings.title,user:l,onLogout:c,isLoggingOut:!1,defaultSelectedKey:"business-settings",children:e.jsxs("div",{className:"space-y-4",children:[C?e.jsx(L,{color:"danger",variant:"faded",title:i.businessSettings.errorTitle,description:C}):null,E?e.jsx(L,{color:"success",variant:"faded",title:i.businessSettings.successTitle,description:E}):null,y||!n?e.jsx("div",{className:"rounded-large border border-default-200 bg-white p-8",children:e.jsx(Q,{label:i.businessSettings.loading})}):e.jsxs("form",{onSubmit:$,className:"space-y-4",children:[e.jsxs(te,{selectedKey:B,onSelectionChange:t=>P(String(t)),size:"sm",radius:"sm",variant:"light",classNames:{base:"w-full",tabList:"w-full max-w-full overflow-x-auto rounded-full border border-default-200 bg-white p-1 flex-nowrap gap-1",tab:"flex-none shrink-0 w-auto px-4 rounded-full border-none data-[selected=true]:bg-primary data-[selected=true]:text-white data-[selected=true]:shadow-none",tabContent:"text-default-600 group-data-[selected=true]:text-white",cursor:"hidden",panel:"w-full px-0 pt-4"},children:[e.jsx(_,{title:e.jsx("span",{className:"whitespace-nowrap",children:i.businessSettings.profileTitle}),children:e.jsx(S,{className:"border border-default-200 shadow-none",children:e.jsxs(x,{className:"space-y-5 p-4 sm:p-5",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-base font-semibold",children:i.businessSettings.profileTitle}),e.jsx("p",{className:"text-sm text-default-500",children:i.businessSettings.subtitle})]}),e.jsxs(v,{label:i.businessSettings.accountTypeLabel,selectedKeys:[n.accountType],onSelectionChange:t=>{const s=String(Array.from(t)[0]??"without_appointments");d(a=>a&&{...a,accountType:s==="with_appointments"?"with_appointments":"without_appointments"})},children:[e.jsx(j,{children:i.businessSettings.accountTypeWithAppointments},"with_appointments"),e.jsx(j,{children:i.businessSettings.accountTypeWithoutAppointments},"without_appointments")]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsx(m,{label:i.businessSettings.nameLabel,value:n.name,onValueChange:t=>d(s=>s&&{...s,name:t}),isRequired:!0,isInvalid:!!u.name,errorMessage:u.name}),e.jsx(m,{label:i.businessSettings.industryLabel,value:n.industry,onValueChange:t=>d(s=>s&&{...s,industry:t}),isInvalid:!!u.industry,errorMessage:u.industry})]}),e.jsx(k,{label:i.businessSettings.shortDescriptionLabel,value:n.shortDescription,onValueChange:t=>d(s=>s&&{...s,shortDescription:t}),minRows:3,isInvalid:!!u.shortDescription,errorMessage:u.shortDescription}),e.jsx(k,{label:i.businessSettings.primaryGoalLabel,value:n.primaryGoal,onValueChange:t=>d(s=>s&&{...s,primaryGoal:t}),minRows:3,isInvalid:!!u.primaryGoal,errorMessage:u.primaryGoal}),e.jsx(ne,{}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsx(m,{label:i.businessSettings.contactEmailLabel,type:"email",value:n.contactEmail,onValueChange:t=>d(s=>s&&{...s,contactEmail:t}),isInvalid:!!u.contactEmail,errorMessage:u.contactEmail}),e.jsx(m,{label:i.businessSettings.contactPhoneLabel,value:n.contactPhone,onValueChange:t=>d(s=>s&&{...s,contactPhone:t}),isInvalid:!!u.contactPhone,errorMessage:u.contactPhone})]}),e.jsx(m,{label:i.businessSettings.websiteLabel,type:"url",value:n.website,onValueChange:t=>d(s=>s&&{...s,website:t}),isInvalid:!!u.website,errorMessage:u.website}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-3",children:[e.jsx(m,{label:i.businessSettings.addressLabel,value:n.businessAddress,onValueChange:t=>d(s=>s&&{...s,businessAddress:t})}),e.jsx(v,{label:i.businessSettings.timezoneLabel,selectedKeys:[n.businessTimezone],onSelectionChange:t=>{const s=String(Array.from(t)[0]??"UTC");d(a=>a&&{...a,businessTimezone:s})},isInvalid:!!u.businessTimezone,errorMessage:u.businessTimezone,children:U.map(t=>e.jsx(j,{children:t},t))}),e.jsx(v,{label:i.businessSettings.currencyLabel,selectedKeys:[n.businessCurrency],onSelectionChange:t=>{const s=String(Array.from(t)[0]??"TJS");d(a=>a&&{...a,businessCurrency:s})},isInvalid:!!u.businessCurrency,errorMessage:u.businessCurrency,children:le.map(t=>e.jsx(j,{children:t.label},t.key))})]})]})})},"profile"),e.jsx(_,{title:e.jsx("span",{className:"whitespace-nowrap",children:i.businessSettings.deliveryTitle}),children:e.jsx(S,{className:"border border-default-200 shadow-none",children:e.jsxs(x,{className:"space-y-4 p-4 sm:p-5",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-base font-semibold",children:i.businessSettings.deliveryTitle}),e.jsx("p",{className:"text-sm text-default-500",children:i.businessSettings.deliverySubtitle})]}),e.jsx(T,{isSelected:n.deliveryEnabled,onValueChange:t=>d(s=>s&&{...s,deliveryEnabled:t}),children:i.businessSettings.deliveryEnabledLabel}),n.deliveryEnabled?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 gap-3 md:grid-cols-2",children:[e.jsx(T,{size:"sm",isSelected:n.deliveryRequireAddress,onValueChange:t=>d(s=>s&&{...s,deliveryRequireAddress:t}),children:i.businessSettings.deliveryRequireAddressLabel}),e.jsx(T,{size:"sm",isSelected:n.deliveryRequireDateTime,onValueChange:t=>d(s=>s&&{...s,deliveryRequireDateTime:t}),children:i.businessSettings.deliveryRequireDateTimeLabel})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-3 md:grid-cols-3",children:[e.jsx(m,{type:"number",size:"sm",label:i.businessSettings.deliveryEtaLabel,value:String(n.deliveryDefaultEtaMinutes),min:15,max:10080,onValueChange:t=>d(s=>{if(!s)return s;const a=Number(t);return{...s,deliveryDefaultEtaMinutes:Number.isFinite(a)&&a>=15?Math.min(Math.round(a),10080):15}})}),e.jsx(m,{type:"number",size:"sm",label:i.businessSettings.deliveryFeeLabel,value:n.deliveryFee,min:0,step:.01,onValueChange:t=>d(s=>s&&{...s,deliveryFee:t})}),e.jsx(m,{type:"number",size:"sm",label:i.businessSettings.deliveryFreeFromLabel,value:n.deliveryFreeFromAmount,min:0,step:.01,onValueChange:t=>d(s=>s&&{...s,deliveryFreeFromAmount:t})})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-3 md:grid-cols-2",children:[e.jsx(m,{type:"time",size:"sm",label:i.businessSettings.deliveryAvailableFromLabel,value:n.deliveryAvailableFrom,onValueChange:t=>d(s=>s&&{...s,deliveryAvailableFrom:t})}),e.jsx(m,{type:"time",size:"sm",label:i.businessSettings.deliveryAvailableToLabel,value:n.deliveryAvailableTo,onValueChange:t=>d(s=>s&&{...s,deliveryAvailableTo:t})})]}),e.jsx(k,{label:i.businessSettings.deliveryNotesLabel,value:n.deliveryNotes,onValueChange:t=>d(s=>s&&{...s,deliveryNotes:t}),minRows:2})]}):null]})})},"delivery"),e.jsx(_,{title:e.jsx("span",{className:"whitespace-nowrap",children:i.businessSettings.requiredFieldsTitle}),children:e.jsx(S,{className:"border border-default-200 shadow-none",children:e.jsxs(x,{className:"space-y-4 p-4 sm:p-5",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-base font-semibold",children:i.businessSettings.requiredFieldsTitle}),e.jsx("p",{className:"text-sm text-default-500",children:i.businessSettings.requiredFieldsSubtitle})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 lg:grid-cols-2",children:[e.jsxs("div",{className:"rounded-medium border border-default-200 p-3",children:[e.jsx("h3",{className:"mb-2 text-sm font-semibold",children:i.businessSettings.orderRequiredFieldsLabel}),e.jsx("div",{className:"grid grid-cols-1 gap-2 sm:grid-cols-2",children:re.map(t=>e.jsx(F,{size:"sm",isSelected:n.orderRequiredFields.includes(t.key),onValueChange:s=>d(a=>{if(!a)return a;const o=s?[...a.orderRequiredFields,t.key]:a.orderRequiredFields.filter(r=>r!==t.key);return{...a,orderRequiredFields:Array.from(new Set(o))}}),children:i.businessSettings[t.labelKey]},t.key))})]}),e.jsxs("div",{className:"rounded-medium border border-default-200 p-3",children:[e.jsx("h3",{className:"mb-2 text-sm font-semibold",children:i.businessSettings.appointmentRequiredFieldsLabel}),e.jsxs("div",{className:"grid grid-cols-1 gap-2 sm:grid-cols-2",children:[de.map(t=>e.jsx(F,{size:"sm",isSelected:n.appointmentRequiredFields.includes(t.key),onValueChange:s=>d(a=>{if(!a)return a;const o=s?[...a.appointmentRequiredFields,t.key]:a.appointmentRequiredFields.filter(r=>r!==t.key);return{...a,appointmentRequiredFields:Array.from(new Set(o))}}),children:i.businessSettings[t.labelKey]},t.key)),e.jsx(F,{size:"sm",isSelected:n.appointmentAutoConfirm,isDisabled:!K,onValueChange:t=>d(s=>s&&{...s,appointmentAutoConfirm:t}),children:i.businessSettings.autoConfirmLabel})]})]})]})]})})},"required"),e.jsx(_,{title:e.jsx("span",{className:"whitespace-nowrap",children:i.businessSettings.aiLanguagesTitle}),children:e.jsx(S,{className:"border border-default-200 shadow-none",children:e.jsxs(x,{className:"space-y-4 p-4 sm:p-5",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-base font-semibold",children:i.businessSettings.aiLanguagesTitle}),e.jsx("p",{className:"text-sm text-default-500",children:i.businessSettings.aiLanguagesSubtitle})]}),e.jsxs("div",{className:"rounded-medium border border-default-200 p-3",children:[e.jsx("h3",{className:"mb-2 text-sm font-semibold",children:i.businessSettings.aiLanguagesLabel}),e.jsx("div",{className:"grid grid-cols-1 gap-2 sm:grid-cols-2 lg:grid-cols-4",children:oe.map(t=>e.jsx(F,{size:"sm",isSelected:n.aiResponseLanguages.includes(t.key),onValueChange:s=>d(a=>{if(!a)return a;const o=s?[...a.aiResponseLanguages,t.key]:a.aiResponseLanguages.filter(r=>r!==t.key);return{...a,aiResponseLanguages:Array.from(new Set(o))}}),children:i.businessSettings[t.labelKey]},t.key))})]})]})})},"aiLanguages"),e.jsx(_,{title:e.jsx("span",{className:"whitespace-nowrap",children:i.businessSettings.scheduleTitle}),children:e.jsx(S,{className:"border border-default-200 shadow-none",children:e.jsxs(x,{className:"space-y-4 p-4 sm:p-5",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-base font-semibold",children:i.businessSettings.scheduleTitle}),e.jsx("p",{className:"text-sm text-default-500",children:i.businessSettings.scheduleSubtitle})]}),e.jsx("div",{className:"space-y-2",children:q.map(t=>{const s=n.businessSchedule[t],a=s.is_day_off;return e.jsx("div",{className:"rounded-medium border border-default-200 px-3 py-2",children:e.jsxs("div",{className:"grid grid-cols-1 gap-2 sm:grid-cols-[170px_minmax(0,1fr)_auto] sm:items-center",children:[e.jsx("p",{className:"text-sm font-semibold leading-none",children:R(t,i)}),a?e.jsx("p",{className:"text-sm text-default-500",children:i.businessSettings.dayOffLabel}):e.jsxs("div",{className:"grid grid-cols-[1fr_auto_1fr] items-center gap-2",children:[e.jsx(m,{type:"time",size:"sm","aria-label":`${R(t,i)} ${i.businessSettings.startTimeLabel}`,value:s.start_time??"09:00",onValueChange:o=>d(r=>r&&{...r,businessSchedule:{...r.businessSchedule,[t]:{...r.businessSchedule[t],start_time:o}}})}),e.jsx("span",{className:"text-xs text-default-500",children:"-"}),e.jsx(m,{type:"time",size:"sm","aria-label":`${R(t,i)} ${i.businessSettings.endTimeLabel}`,value:s.end_time??"18:00",onValueChange:o=>d(r=>r&&{...r,businessSchedule:{...r.businessSchedule,[t]:{...r.businessSchedule[t],end_time:o}}})})]}),e.jsx(T,{size:"sm",isSelected:a,onValueChange:o=>d(r=>r&&{...r,businessSchedule:{...r.businessSchedule,[t]:{is_day_off:o,start_time:o?null:r.businessSchedule[t].start_time??"09:00",end_time:o?null:r.businessSchedule[t].end_time??"18:00"}}}),children:i.businessSettings.dayOffLabel})]})},t)})})]})})},"schedule"),e.jsx(_,{title:e.jsx("span",{className:"whitespace-nowrap",children:i.businessSettings.bookingTitle}),children:e.jsx(S,{className:"border border-default-200 shadow-none",children:e.jsxs(x,{className:"space-y-5 p-4 sm:p-5",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-base font-semibold",children:i.businessSettings.bookingTitle}),e.jsx("p",{className:"text-sm text-default-500",children:i.businessSettings.bookingSubtitle})]}),K?e.jsx(e.Fragment,{children:e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-3",children:[e.jsx(v,{label:i.businessSettings.slotLabel,selectedKeys:[String(n.appointmentSlotMinutes)],onSelectionChange:t=>{const s=Number(Array.from(t)[0]??"30");d(a=>a&&{...a,appointmentSlotMinutes:V.includes(s)?s:30})},children:V.map(t=>e.jsx(j,{children:`${t} ${i.businessSettings.minutesUnit}`},String(t)))}),e.jsx(v,{label:i.businessSettings.bufferLabel,selectedKeys:[String(n.appointmentBufferMinutes)],onSelectionChange:t=>{const s=Number(Array.from(t)[0]??"0");d(a=>a&&{...a,appointmentBufferMinutes:O.includes(s)?s:0})},children:O.map(t=>e.jsx(j,{children:`${t} ${i.businessSettings.minutesUnit}`},String(t)))}),e.jsx(m,{type:"number",label:i.businessSettings.maxDaysAheadLabel,value:String(n.appointmentMaxDaysAhead),onValueChange:t=>{const s=Number(t);d(a=>a&&{...a,appointmentMaxDaysAhead:Number.isFinite(s)&&s>0?s:1})},min:1,max:365,isInvalid:!!u.appointmentMaxDaysAhead,errorMessage:u.appointmentMaxDaysAhead})]})}):e.jsx(L,{color:"default",variant:"flat",title:i.businessSettings.bookingDisabledTitle,description:i.businessSettings.bookingDisabledDescription})]})})},"booking")]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(ie,{color:"primary",type:"submit",isLoading:N,className:"min-w-44",children:i.businessSettings.saveButton})})]})]})})}export{ke as default};
