import{n as P,r as o,j as t,L as S,w as v,A as y}from"./index-BZElV6kd.js";import{a as d,l as N}from"./errorLocalization-D9V597UG.js";import{n as L,i as A}from"./validation-Cr-7aEV3.js";import{b as F,B as b,L as z,c as j,d as T}from"./usePageSeo-DSlM1PDu.js";import{i as k}from"./chunk-SQIAVXJX-C9suOtsr.js";import{l as B}from"./chunk-SIOPM2FD-B0LEObwM.js";import"./chunk-KQW2TNLT-CFcSpz4m.js";import"./useLabel-D13VgtCp.js";import"./chunk-ICU6NNET-C8KR39MB.js";function I(a){return typeof a=="object"&&a!==null}function R(a){const r=(I(a.data)?a.data:void 0)?.errors;if(!r)return{};const n=r.email?.[0];return typeof n=="string"?{email:n}:{}}function U(){const{locale:a,messages:e}=P(),[r,n]=o.useState(""),[E,f]=o.useState(!1),[g,u]=o.useState(null),[h,x]=o.useState(null),[c,l]=o.useState({});F({title:`${e.auth.forgotPasswordTitle} | ${e.app.name}`,description:e.auth.forgotPasswordSubtitle,locale:a});const w=async m=>{m.preventDefault(),l({}),u(null),x(null);const i=L(r);if(!i){l({email:e.auth.requiredCredentials});return}if(!A(i)){l({email:e.auth.invalidEmail});return}f(!0);try{const s=await v({email:i});x(d(s.message,e))}catch(s){if(s instanceof y){const p=N(R(s),e);if(Object.keys(p).length>0){l(p);return}u(d(s.message,e));return}if(s instanceof Error){u(d(s.message,e));return}u(e.auth.forgotPasswordFailed)}finally{f(!1)}};return t.jsx("main",{className:"flex min-h-screen items-center justify-center bg-white px-4 py-8",children:t.jsxs("div",{className:"w-full max-w-72",children:[t.jsxs("header",{className:"mb-6 flex items-start justify-between gap-3",children:[t.jsx("div",{className:"flex items-center gap-3",children:t.jsx("img",{src:b.logoUrl,alt:b.logoAlt,className:"h-9 w-auto object-contain"})}),t.jsx(z,{})]}),t.jsxs("div",{className:"mb-5",children:[t.jsx("h1",{className:"text-3xl font-bold leading-tight text-foreground",children:e.auth.forgotPasswordTitle}),t.jsx("p",{className:"mt-1 text-base text-default-600",children:e.auth.forgotPasswordSubtitle})]}),t.jsxs("form",{className:"flex flex-col gap-4",onSubmit:w,noValidate:!0,children:[t.jsx(k,{isRequired:!0,autoComplete:"email",type:"email",label:e.auth.forgotPasswordEmailLabel,labelPlacement:"outside",placeholder:e.auth.forgotPasswordEmailPlaceholder,value:r,onValueChange:m=>{n(m),c.email&&l(i=>({...i,email:void 0}))},variant:"bordered",maxLength:255,isInvalid:!!c.email,errorMessage:c.email}),g?t.jsx(j,{color:"danger",title:e.auth.errorTitle,description:g,variant:"flat"}):null,h?t.jsx(j,{color:"success",title:e.auth.successTitle,description:h,variant:"flat"}):null,t.jsx(T,{type:"submit",color:"primary",isLoading:E,fullWidth:!0,children:e.auth.forgotPasswordButton})]}),t.jsx("p",{className:"mt-4 text-center text-small text-default-500",children:t.jsx(B,{as:S,to:"/login",size:"sm",children:e.auth.backToLogin})})]})})}export{U as default};
