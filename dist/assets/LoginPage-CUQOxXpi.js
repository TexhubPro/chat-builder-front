import{r as l,c as Ae,j as a,u as _e,e as de,I as Me,a as ce,b as ue,d as N,f as Oe,g as Fe,h as qe,l as ze,n as Ge,L as We,A as Te,J as Ue}from"./index-CzVjE_R5.js";import{s as Ze,c as He,d as Je,g as fe,i as Qe,l as Ke,b as Y}from"./validation-Dr_-wTAJ.js";import{l as Xe,g as Ye,o as ea,$ as aa,E as ia,b as ta,B as me,L as sa,c as W}from"./usePageSeo-CMtUVRUy.js";import{$ as na,a as pe}from"./useToggleState-C5z9MN-8.js";import{u as la,m as oa,d as he}from"./index-D4ADvH-F.js";import{$ as be,a as ra,b as ge,c as da,u as ca,F as ua}from"./chunk-ICU6NNET-C9LXNIYq.js";import{u as fa}from"./index-BY8MoOwp.js";import{i as ve}from"./chunk-SQIAVXJX-BoEOq7fl.js";import{a as ma}from"./chunk-VF35X3H6-Bm_P2K1X.js";import{l as ha}from"./chunk-SIOPM2FD-B0fvc9Ip.js";import"./useLabel-Ba2qxKBx.js";function xe(e,t,o){let n=be({...e,value:t.isSelected}),{isInvalid:u,validationErrors:i,validationDetails:f}=n.displayValidation,{labelProps:v,inputProps:r,isSelected:m,isPressed:s,isDisabled:P,isReadOnly:x}=na({...e,isInvalid:u},t,o);ra(e,n,o);let{isIndeterminate:I,isRequired:$,validationBehavior:b="aria"}=e;l.useEffect(()=>{o.current&&(o.current.indeterminate=!!I)});let{pressProps:g}=Xe({isDisabled:P||x,onPress(){let{[ge]:d}=e,{commitValidation:y}=d||n;y()}});return{labelProps:Ye(v,g,l.useMemo(()=>({onMouseDown:d=>d.preventDefault()}),[])),inputProps:{...r,checked:m,"aria-required":$&&b==="aria"||void 0,required:$&&b==="native"},isSelected:m,isPressed:s,isDisabled:P,isReadOnly:x,isInvalid:u,validationErrors:i,validationDetails:f}}const va=new WeakMap;function pa(e,t,o){const n=pe({isReadOnly:e.isReadOnly||t.isReadOnly,isSelected:t.isSelected(e.value),defaultSelected:t.defaultValue.includes(e.value),onChange(d){d?t.addValue(e.value):t.removeValue(e.value),e.onChange&&e.onChange(d)}});let{name:u,form:i,descriptionId:f,errorMessageId:v,validationBehavior:r}=va.get(t);var m;r=(m=e.validationBehavior)!==null&&m!==void 0?m:r;let{realtimeValidation:s}=be({...e,value:n.isSelected,name:void 0,validationBehavior:"aria"}),P=l.useRef(da),x=()=>{t.setInvalid(e.value,s.isInvalid?s:P.current)};l.useEffect(x);let I=t.realtimeValidation.isInvalid?t.realtimeValidation:s,$=r==="native"?t.displayValidation:I;var b;let g=xe({...e,isReadOnly:e.isReadOnly||t.isReadOnly,isDisabled:e.isDisabled||t.isDisabled,name:e.name||u,form:e.form||i,isRequired:(b=e.isRequired)!==null&&b!==void 0?b:t.isRequired,validationBehavior:r,[ge]:{realtimeValidation:I,displayValidation:$,resetValidation:t.resetValidation,commitValidation:t.commitValidation,updateValidation(d){P.current=d,x()}}},n,o);return{...g,inputProps:{...g.inputProps,"aria-describedby":[e["aria-describedby"],t.isInvalid?v:null,f].filter(Boolean).join(" ")||void 0}}}var[Ma,ba]=Ae({name:"CheckboxGroupContext",strict:!1});function ga(e){const{isSelected:t,disableAnimation:o,...n}=e;return a.jsx("svg",{"aria-hidden":"true",fill:"none",role:"presentation",stroke:"currentColor",strokeDasharray:22,strokeDashoffset:t?44:66,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,style:!o&&t?{transition:"stroke-dashoffset 250ms linear 0.2s"}:{},viewBox:"0 0 17 18",...n,children:a.jsx("polyline",{points:"1 9 7 14 15 4"})})}function xa(e){const{isSelected:t,disableAnimation:o,...n}=e;return a.jsx("svg",{stroke:"currentColor",strokeWidth:3,viewBox:"0 0 24 24",...n,children:a.jsx("line",{x1:"21",x2:"3",y1:"12",y2:"12"})})}function ya(e){const{isIndeterminate:t,...o}=e,n=t?xa:ga;return a.jsx(n,{...o})}function Ca(e={}){var t,o,n,u,i,f,v,r;const m=_e(),s=ba(),{validationBehavior:P}=ca(ua)||{},x=!!s,{as:I,ref:$,value:b="",children:g,icon:d,name:y,isRequired:p,isReadOnly:D=!1,autoFocus:z=!1,isSelected:G,size:q=(t=s?.size)!=null?t:"md",color:C=(o=s?.color)!=null?o:"primary",radius:h=s?.radius,lineThrough:S=(n=s?.lineThrough)!=null?n:!1,isDisabled:w=(u=s?.isDisabled)!=null?u:!1,disableAnimation:j=(f=(i=s?.disableAnimation)!=null?i:m?.disableAnimation)!=null?f:!1,validationState:E,isInvalid:A=E?E==="invalid":(v=s?.isInvalid)!=null?v:!1,isIndeterminate:L=!1,validationBehavior:je=x?s.validationBehavior:(r=P??m?.validationBehavior)!=null?r:"native",defaultSelected:ee,classNames:c,className:Ie,onValueChange:ae,validate:$e,..._}=e,Se=I||"label",we=l.useRef(null),M=l.useRef(null);let T=e.onChange;x&&(T=de(()=>{s.groupState.resetValidation()},T));const U=l.useId(),Z=l.useMemo(()=>({name:y,value:b,children:g,autoFocus:z,defaultSelected:ee,isIndeterminate:L,isRequired:p,isInvalid:A,isSelected:G,isDisabled:w,isReadOnly:D,"aria-label":Me(_["aria-label"],g),"aria-labelledby":_["aria-labelledby"]||U,onChange:ae}),[y,b,g,z,ee,L,p,A,G,w,D,_["aria-label"],_["aria-labelledby"],U,ae]),ie=pe(Z),te={isInvalid:A,isRequired:p,validate:$e,validationState:E,validationBehavior:je},{inputProps:B,isSelected:O,isDisabled:k,isReadOnly:H,isPressed:ke,isInvalid:Re}=x?pa({...Z,...te},s.groupState,M):xe({...Z,...te},ie,M),Ve=k||H,F=E==="invalid"||A||Re,se=Ve?!1:ke,{hoverProps:ne,isHovered:J}=ea({isDisabled:B.disabled}),{focusProps:le,isFocused:Q,isFocusVisible:K}=aa({autoFocus:B.autoFocus}),R=l.useMemo(()=>ia({color:C,size:q,radius:h,isInvalid:F,lineThrough:S,isDisabled:k,disableAnimation:j}),[C,q,h,F,S,k,j]);fa(()=>{if(!M.current)return;const V=!!M.current.checked;ie.setSelected(V)},[M.current]);const X=la(T),oe=l.useCallback(V=>{if(H||k){V.preventDefault();return}X?.(V)},[H,k,X]),re=ce(c?.base,Ie),Ne=l.useCallback(()=>({ref:we,className:R.base({class:re}),"data-disabled":N(k),"data-selected":N(O||L),"data-invalid":N(F),"data-hover":N(J),"data-focus":N(Q),"data-pressed":N(se),"data-readonly":N(B.readOnly),"data-focus-visible":N(K),"data-indeterminate":N(L),...ue(ne,_)}),[R,re,k,O,L,F,J,Q,se,B.readOnly,K,ne,_]),Ee=l.useCallback((V={})=>({...V,"aria-hidden":!0,className:R.wrapper({class:ce(c?.wrapper,V?.className)})}),[R,c?.wrapper]),Le=l.useCallback(()=>({ref:oa(M,$),...ue(B,le),className:R.hiddenInput({class:c?.hiddenInput}),onChange:de(B.onChange,oe)}),[B,le,oe,c?.hiddenInput]),Be=l.useCallback(()=>({id:U,className:R.label({class:c?.label})}),[R,c?.label,k,O,F]),De=l.useCallback(()=>({isSelected:O,isIndeterminate:L,disableAnimation:j,className:R.icon({class:c?.icon})}),[R,c?.icon,O,L,j]);return{Component:Se,icon:d,children:g,isSelected:O,isDisabled:k,isInvalid:F,isFocused:Q,isHovered:J,isFocusVisible:K,getBaseProps:Ne,getWrapperProps:Ee,getInputProps:Le,getLabelProps:Be,getIconProps:De}}var ye=Oe((e,t)=>{const{Component:o,children:n,icon:u=a.jsx(ya,{}),getBaseProps:i,getWrapperProps:f,getInputProps:v,getIconProps:r,getLabelProps:m}=Ca({...e,ref:t}),s=typeof u=="function"?u(r()):l.cloneElement(u,r());return a.jsxs(o,{...i(),children:[a.jsx("input",{...v()}),a.jsx("span",{...f(),children:s}),n&&a.jsx("span",{...m(),children:n})]})});ye.displayName="HeroUI.Checkbox";var Pa=ye;function Ce(e){return typeof e=="object"&&e!==null}function Pe(e){return Ce(e.data)?e.data:{}}function ja(e){return typeof e.token=="string"&&Ce(e.user)}function Ia(e){const o=Pe(e).errors;if(!o)return{};const n=f=>{const v=o[f];if(!Array.isArray(v))return;const r=v[0];return typeof r=="string"?r:void 0},u=n("login")??n("email")??n("phone"),i=n("password");return{...u?{login:u}:{},...i?{password:i}:{}}}function $a(){return a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24","aria-hidden":"true",children:[a.jsx("path",{fill:"#EA4335",d:"M12 10.2v3.9h5.5c-.2 1.3-1.7 3.9-5.5 3.9-3.3 0-6-2.7-6-6s2.7-6 6-6c1.9 0 3.2.8 3.9 1.5l2.7-2.6C16.9 3.2 14.7 2.2 12 2.2 6.8 2.2 2.5 6.5 2.5 11.7S6.8 21.2 12 21.2c6.9 0 9.1-4.8 9.1-7.2 0-.5 0-.8-.1-1.1H12Z"}),a.jsx("path",{fill:"#34A853",d:"M3.7 7.6l3.2 2.3C7.8 8 9.7 6.7 12 6.7c1.9 0 3.2.8 3.9 1.5l2.7-2.6C16.9 3.9 14.7 2.9 12 2.9 8.3 2.9 5.1 5 3.7 7.6Z"}),a.jsx("path",{fill:"#FBBC05",d:"M12 21.2c2.6 0 4.7-.8 6.3-2.3l-2.9-2.4c-.8.6-1.9 1.1-3.4 1.1-3.8 0-5.2-2.6-5.5-3.8l-3.2 2.5c1.5 2.9 4.6 4.9 8.7 4.9Z"}),a.jsx("path",{fill:"#4285F4",d:"M21.1 13.9c.1-.3.1-.6.1-1s0-.8-.1-1.2H12v3.9h5.5c-.3 1.4-1.2 2.5-2.2 3.3l2.9 2.4c1.7-1.6 2.9-4 2.9-7.4Z"})]})}function Sa(){return a.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24","aria-hidden":"true",children:a.jsx("path",{fill:"currentColor",d:"M12 .5C5.6.5.5 5.6.5 12c0 5.1 3.3 9.4 7.9 10.9.6.1.8-.2.8-.6v-2.2c-3.2.7-3.9-1.4-3.9-1.4-.5-1.3-1.2-1.7-1.2-1.7-1-.7.1-.7.1-.7 1 .1 1.6 1.1 1.6 1.1 1 .1 1.8 1.2 1.8 1.2.8 1.5 2.2 1.1 2.7.8.1-.6.3-1.1.6-1.3-2.5-.3-5.1-1.2-5.1-5.5 0-1.2.4-2.2 1.1-3-.1-.3-.5-1.4.1-2.9 0 0 .9-.3 3 .9a10.3 10.3 0 0 1 5.5 0c2.1-1.2 3-.9 3-.9.6 1.5.2 2.6.1 2.9.7.8 1.1 1.8 1.1 3 0 4.2-2.6 5.2-5.1 5.5.4.3.7 1 .7 2v3c0 .4.2.7.8.6A11.5 11.5 0 0 0 23.5 12C23.5 5.6 18.4.5 12 .5Z"})})}function Oa(){const e=Fe(),t=qe(),{login:o,setSession:n}=ze(),{locale:u,messages:i}=Ge(),[f,v]=l.useState(""),[r,m]=l.useState(""),[s,P]=l.useState(!0),[x,I]=l.useState(!1),[$,b]=l.useState(null),[g,d]=l.useState(null),[y,p]=l.useState({}),D=t.state,z=D?.from&&D.from!=="/login"?D.from:"/";ta({title:`${i.auth.loginTitle} | ${i.app.name}`,description:i.auth.subtitle,locale:u});const G=async C=>{C.preventDefault(),d(null),p({});const h={};if(!f||!r){f||(h.login=i.auth.requiredCredentials),r||(h.password=i.auth.requiredCredentials),p(h);return}if(r.length<=6){p({password:i.auth.passwordTooShort});return}if(!He(f)){p({login:i.auth.invalidLoginIdentifier});return}const S=Je(f);I(!0),d(null),p({});try{await o({login:S,password:r,deviceName:s?`${fe()}-remember`:fe()}),e(z,{replace:!0})}catch(w){if(w instanceof Te){const j=Pe(w);if(j.requires_moderation){if(ja(j)){n(j.token,j.user),e("/moderation",{replace:!0});return}d(i.auth.accountUnderModeration);return}if(j.requires_email_verification){const A=Qe(S)?`?email=${encodeURIComponent(S)}`:"";e(`/verify-email${A}`,{replace:!0});return}const E=Ke(Ia(w),i);if(Object.keys(E).length>0){p(E);return}d(Y(w.message,i));return}if(w instanceof Error){d(Y(w.message,i));return}d(i.auth.loginFailed)}finally{I(!1)}},q=async C=>{d(null),p({}),b(C);try{const S=(await Ue(C)).authorization_url;if(!S)throw new Error(i.auth.socialLoginFailed);window.location.assign(S)}catch(h){h instanceof Error?d(Y(h.message,i)):d(i.auth.socialLoginFailed),b(null)}};return a.jsx("main",{className:"flex min-h-screen items-center justify-center bg-white px-4 py-8",children:a.jsxs("div",{className:"w-full max-w-72",children:[a.jsxs("header",{className:"mb-6 flex items-start justify-between gap-3",children:[a.jsx("div",{className:"flex items-center gap-3",children:a.jsx("img",{src:me.logoUrl,alt:me.logoAlt,className:"h-10 w-10 rounded-md object-contain"})}),a.jsx(sa,{})]}),a.jsxs("div",{className:"mb-5",children:[a.jsx("h1",{className:"text-3xl font-bold leading-tight text-foreground",children:i.auth.welcomeBack}),a.jsx("p",{className:"mt-1 text-base text-default-600",children:i.auth.subtitle})]}),a.jsxs("form",{className:"flex flex-col gap-4",onSubmit:G,noValidate:!0,children:[a.jsx(ve,{isRequired:!0,autoComplete:"username",label:i.auth.loginLabel,labelPlacement:"outside",placeholder:i.auth.loginPlaceholder,value:f,onValueChange:C=>{v(Ze(C)),y.login&&p(h=>({...h,login:void 0}))},variant:"bordered",maxLength:255,inputMode:"email",isInvalid:!!y.login,errorMessage:y.login}),a.jsx(ve,{isRequired:!0,autoComplete:"current-password",label:i.auth.passwordLabel,labelPlacement:"outside",placeholder:i.auth.passwordPlaceholder,type:"password",value:r,onValueChange:C=>{m(C),y.password&&p(h=>({...h,password:void 0}))},variant:"bordered",maxLength:255,isInvalid:!!y.password,errorMessage:y.password}),a.jsxs("div",{className:"flex items-center justify-between gap-2",children:[a.jsx(Pa,{isSelected:s,onValueChange:P,classNames:{label:"text-medium"},children:i.auth.rememberMe}),a.jsx(W,{type:"button",variant:"light",size:"md",className:"text-medium",onPress:()=>e("/forgot-password"),children:i.auth.forgotPassword})]}),g?a.jsx(ma,{color:"danger",title:i.auth.errorTitle,description:g,variant:"flat"}):null,a.jsx(W,{type:"submit",color:"primary",isLoading:x,fullWidth:!0,children:i.auth.loginButton})]}),a.jsxs("div",{className:"my-4 flex items-center gap-3",children:[a.jsx(he,{className:"flex-1"}),a.jsx("span",{className:"text-small text-default-500",children:i.common.separatorOr}),a.jsx(he,{className:"flex-1"})]}),a.jsxs("div",{className:"flex flex-col gap-2",children:[a.jsx(W,{variant:"bordered",startContent:a.jsx($a,{}),isLoading:$==="google",onPress:()=>{q("google")},fullWidth:!0,children:i.auth.continueWithGoogle}),a.jsx(W,{variant:"bordered",startContent:a.jsx(Sa,{}),isLoading:$==="github",onPress:()=>{q("github")},fullWidth:!0,children:i.auth.continueWithGithub})]}),a.jsxs("p",{className:"mt-4 text-center text-small text-default-500",children:[i.auth.noAccount," ",a.jsx(ha,{as:We,to:"/register",size:"sm",children:i.auth.signUp})]})]})})}export{Oa as default};
